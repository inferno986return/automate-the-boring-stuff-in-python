<?xml version="1.0" encoding="UTF-8"?>
<html xml:lang="en-us" lang="en-us" xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:ns="http://www.w3.org/2001/10/synthesis">
<head>
<title>Automate the Boring Stuff with Python: Practical Programming for Total Beginners, 2nd Edition</title>
<link rel="stylesheet" type="text/css" href="../styles/9781593279936.css"/>
</head>
<body>
<h2 class="h2" id="ch03"><span epub:type="pagebreak" id="page_57"/><strong><span class="big">3</span><br/>FUNCTIONS</strong></h2>
<div class="image1"><img src="../images/03fig00.jpg" alt="Image"/></div>
<p class="noindent">You&#8217;re already familiar with the <span class="literal">print()</span>, <span class="literal">input()</span>, and <span class="literal">len()</span> functions from the previous chapters. Python provides several built-in functions like these, but you can also write your own functions. A <em>function</em> is like a miniprogram within a program.</p>
<p class="indent">To better understand how functions work, let&#8217;s create one. Enter this program into the file editor and save it as <em>helloFunc.py</em>:</p>
<p class="programs"><span class="ent">&#x278A;</span> def hello():<br/>
&#160;&#160;&#160;&#160;<span class="ent">&#x278B;</span> print('Howdy!')<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;print('Howdy!!!')<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;print('Hello there.')<br/><br/>
<span class="ent">&#x278C;</span> hello()<br/>
&#160;&#160;&#160;hello()<br/>
&#160;&#160;&#160;hello()</p>
<p class="indent"><span epub:type="pagebreak" id="page_58"/>You can view the execution of this program at <em><a href="https://autbor.com/hellofunc/">https://autbor.com/hellofunc/</a></em>. The first line is a <span class="literal">def</span> statement <span class="ent">&#x278A;</span>, which defines a function named <span class="literal">hello()</span>. The code in the block that follows the <span class="literal">def</span> statement <span class="ent">&#x278B;</span> is the body of the function. This code is executed when the function is called, not when the function is first defined.</p>
<p class="indent">The <span class="literal">hello()</span> lines after the function <span class="ent">&#x278C;</span> are function calls. In code, a function call is just the function&#8217;s name followed by parentheses, possibly with some number of arguments in between the parentheses. When the program execution reaches these calls, it will jump to the top line in the function and begin executing the code there. When it reaches the end of the function, the execution returns to the line that called the function and continues moving through the code as before.</p>
<p class="indent">Since this program calls <span class="literal">hello()</span> three times, the code in the <span class="literal">hello()</span> function is executed three times. When you run this program, the output looks like this:</p>
<p class="programs">Howdy!<br/>
Howdy!!!<br/>
Hello there.<br/>
Howdy!<br/>
Howdy!!!<br/>
Hello there.<br/>
Howdy!<br/>
Howdy!!!<br/>
Hello there.</p>
<p class="indent">A major purpose of functions is to group code that gets executed multiple times. Without a function defined, you would have to copy and paste this code each time, and the program would look like this:</p>
<p class="programs">print('Howdy!')<br/>
print('Howdy!!!')<br/>
print('Hello there.')<br/>
print('Howdy!')<br/>
print('Howdy!!!')<br/>
print('Hello there.')<br/>
print('Howdy!')<br/>
print('Howdy!!!')<br/>
print('Hello there.')</p>
<p class="indent">In general, you always want to avoid duplicating code because if you ever decide to update the code&#8212;if, for example, you find a bug you need to fix&#8212;you&#8217;ll have to remember to change the code everywhere you copied it.</p>
<p class="indent">As you get more programming experience, you&#8217;ll often find yourself <em>deduplicating</em> code, which means getting rid of duplicated or copy-and-pasted code. Deduplication makes your programs shorter, easier to read, and easier to update.</p>
<h3 class="h3" id="ch03lev1sec1"><span epub:type="pagebreak" id="page_59"/><strong>def Statements with Parameters</strong></h3>
<p class="noindent">When you call the <span class="literal">print()</span> or <span class="literal">len()</span> function, you pass them values, called <em>arguments</em>, by typing them between the parentheses. You can also define your own functions that accept arguments. Type this example into the file editor and save it as <em>helloFunc2.py</em>:</p>
<p class="programs"><span class="ent">&#x278A;</span> def hello(name):<br/>
&#160;&#160;&#160;&#160;<span class="ent">&#x278B;</span> print('Hello, ' + name)<br/>
<br/>
<span class="ent">&#x278C;</span> hello('Alice')<br/>
&#160;&#160;&#160;hello('Bob')</p>
<p class="indent">When you run this program, the output looks like this:</p>
<p class="programs">Hello, Alice<br/>
Hello, Bob</p>
<p class="indent">You can view the execution of this program at <em><a href="https://autbor.com/hellofunc2/">https://autbor.com/hellofunc2/</a></em>. The definition of the <span class="literal">hello()</span> function in this program has a parameter called <span class="literal">name</span> <span class="ent">&#x278A;</span>. <em>Parameters</em> are variables that contain arguments. When a function is called with arguments, the arguments are stored in the parameters. The first time the <span class="literal">hello()</span> function is called, it is passed the argument <span class="literal">'Alice'</span> <span class="ent">&#x278C;</span>. The program execution enters the function, and the parameter <span class="literal">name</span> is automatically set to <span class="literal">'Alice'</span>, which is what gets printed by the <span class="literal">print()</span> statement <span class="ent">&#x278B;</span>.</p>
<p class="indent">One special thing to note about parameters is that the value stored in a parameter is forgotten when the function returns. For example, if you added <span class="literal">print(name)</span> after <span class="literal">hello('Bob')</span> in the previous program, the program would give you a <span class="literal">NameError</span> because there is no variable named <span class="literal">name</span>. This variable is destroyed after the function call <span class="literal">hello('Bob')</span> returns, so <span class="literal">print(name)</span> would refer to a <span class="literal">name</span> variable that does not exist.</p>
<p class="indent">This is similar to how a program&#8217;s variables are forgotten when the program terminates. I&#8217;ll talk more about why that happens later in the chapter, when I discuss what a function&#8217;s local scope is.</p>
<h4 class="h4" id="ch03lev2sec1"><strong><em>Define, Call, Pass, Argument, Parameter</em></strong></h4>
<p class="noindent">The terms <em>define</em>, <em>call</em>, <em>pass</em>, <em>argument</em>, and <em>parameter</em> can be confusing. Let&#8217;s look at a code example to review these terms:</p>
<p class="programs"><span class="ent">&#x278A;</span> def sayHello(name):<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;print('Hello, ' + name)<br/>
<span class="ent">&#x278B;</span> sayHello('Al')</p>
<p class="indent">To <em>define</em> a function is to create it, just like an assignment statement like <span class="literal">spam = 42</span> creates the <span class="literal">spam</span> variable. The <span class="literal">def</span> statement defines the <span class="literal">sayHello()</span> function <span class="ent">&#x278A;</span>. The <span class="literal">sayHello('Al')</span> line <span class="ent">&#x278B;</span> <em>calls</em> the now-created function, sending the execution to the top of the function&#8217;s code. This function call is also known as <em>passing</em> the string value <span class="literal">'Al'</span> to the function. A value being <span epub:type="pagebreak" id="page_60"/>passed to a function in a function call is an <em>argument</em>. The argument <span class="literal">'Al'</span> is assigned to a local variable named <span class="literal">name</span>. Variables that have arguments assigned to them are <em>parameters</em>.</p>
<p class="indent">It&#8217;s easy to mix up these terms, but keeping them straight will ensure that you know precisely what the text in this chapter means.</p>
<h3 class="h3" id="ch03lev1sec2"><strong>Return Values and return Statements</strong></h3>
<p class="noindent">When you call the <span class="literal">len()</span> function and pass it an argument such as <span class="literal">'Hello'</span>, the function call evaluates to the integer value <span class="literal">5</span>, which is the length of the string you passed it. In general, the value that a function call evaluates to is called the <em>return value</em> of the function.</p>
<p class="indent">When creating a function using the <span class="literal">def</span> statement, you can specify what the return value should be with a <span class="literal">return</span> statement. A <span class="literal">return</span> statement consists of the following:</p>
<ul>
<li class="noindent">The <span class="literal">return</span> keyword</li>
<li class="noindent">The value or expression that the function should return</li>
</ul>
<p class="indent">When an expression is used with a <span class="literal">return</span> statement, the return value is what this expression evaluates to. For example, the following program defines a function that returns a different string depending on what number it is passed as an argument. Enter this code into the file editor and save it as <em>magic8Ball.py</em>:</p>
<p class="programs"><span class="ent">&#x278A;</span> import random<br/>
<br/>
<span class="ent">&#x278B;</span> def getAnswer(answerNumber):<br/>
&#160;&#160;&#160;&#160;<span class="ent">&#x278C;</span> if answerNumber == 1:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 'It is certain'<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;elif answerNumber == 2:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 'It is decidedly so'<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;elif answerNumber == 3:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 'Yes'<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;elif answerNumber == 4:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 'Reply hazy try again'<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;elif answerNumber == 5:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 'Ask again later'<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;elif answerNumber == 6:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 'Concentrate and ask again'<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;elif answerNumber == 7:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 'My reply is no'<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;elif answerNumber == 8:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 'Outlook not so good'<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;elif answerNumber == 9:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 'Very doubtful'<br/>
<br/>
<span class="ent">&#x278D;</span> r = random.randint(1, 9)<br/>
<span class="ent">&#x278E;</span> fortune = getAnswer(r)<br/>
<span class="ent">&#x278F;</span> print(fortune)</p>
<p class="indent"><span epub:type="pagebreak" id="page_61"/>You can view the execution of this program at <em><a href="https://autbor.com/magic8ball/">https://autbor.com/magic8ball/</a></em>. When this program starts, Python first imports the <span class="literal">random</span> module <span class="ent">&#x278A;</span>. Then the <span class="literal">getAnswer()</span> function is defined <span class="ent">&#x278B;</span>. Because the function is being defined (and not called), the execution skips over the code in it. Next, the <span class="literal">random.randint()</span> function is called with two arguments: <span class="literal">1</span> and <span class="literal">9</span> <span class="ent">&#x278D;</span>. It evaluates to a random integer between <span class="literal">1</span> and <span class="literal">9</span> (including <span class="literal">1</span> and <span class="literal">9</span> themselves), and this value is stored in a variable named <span class="literal">r</span>.</p>
<p class="indent">The <span class="literal">getAnswer()</span> function is called with <span class="literal">r</span> as the argument <span class="ent">&#x278E;</span>. The program execution moves to the top of the <span class="literal">getAnswer()</span> function <span class="ent">&#x278C;</span>, and the value <span class="literal">r</span> is stored in a parameter named <span class="literal">answerNumber</span>. Then, depending on the value in <span class="literal">answerNumber</span>, the function returns one of many possible string values. The program execution returns to the line at the bottom of the program that originally called <span class="literal">getAnswer()</span> <span class="ent">&#x278E;</span>. The returned string is assigned to a variable named <span class="literal">fortune</span>, which then gets passed to a <span class="literal">print()</span> call <span class="ent">&#x278F;</span> and is printed to the screen.</p>
<p class="indent">Note that since you can pass return values as an argument to another function call, you could shorten these three lines:</p>
<p class="programs">r = random.randint(1, 9)<br/>
fortune = getAnswer(r)<br/>
print(fortune)</p>
<p class="noindent">to this single equivalent line:</p>
<p class="programs">print(getAnswer(random.randint(1, 9)))</p>
<p class="indent">Remember, expressions are composed of values and operators. A function call can be used in an expression because the call evaluates to its return value.</p>
<h3 class="h3" id="ch03lev1sec3"><strong>The None Value</strong></h3>
<p class="noindent">In Python, there is a value called <span class="literal">None</span>, which represents the absence of a value. The <span class="literal">None</span> value is the only value of the <span class="literal">NoneType</span> data type. (Other programming languages might call this value <span class="literal">null</span>, <span class="literal">nil</span>, or <span class="literal">undefined</span>.) Just like the Boolean <span class="literal">True</span> and <span class="literal">False</span> values, <span class="literal">None</span> must be typed with a capital <em>N</em>.</p>
<p class="indent">This value-without-a-value can be helpful when you need to store something that won&#8217;t be confused for a real value in a variable. One place where <span class="literal">None</span> is used is as the return value of <span class="literal">print()</span>. The <span class="literal">print()</span> function displays text on the screen, but it doesn&#8217;t need to return anything in the same way <span class="literal">len()</span> or <span class="literal">input()</span> does. But since all function calls need to evaluate to a return value, <span class="literal">print()</span> returns <span class="literal">None</span>. To see this in action, enter the following into the interactive shell:</p>
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">spam = print('Hello!')</span><br/>
Hello!<br/>
&gt;&gt;&gt; <span class="codestrong1">None == spam</span><br/>
True</p>
<p class="indent"><span epub:type="pagebreak" id="page_62"/>Behind the scenes, Python adds <span class="literal">return None</span> to the end of any function definition with no <span class="literal">return</span> statement. This is similar to how a <span class="literal">while</span> or <span class="literal">for</span> loop implicitly ends with a <span class="literal">continue</span> statement. Also, if you use a <span class="literal">return</span> statement without a value (that is, just the <span class="literal">return</span> keyword by itself), then <span class="literal">None</span> is returned.</p>
<h3 class="h3" id="ch03lev1sec4"><strong>Keyword Arguments and the print() Function</strong></h3>
<p class="noindent">Most arguments are identified by their position in the function call. For example, <span class="literal">random.randint(1, 10)</span> is different from <span class="literal">random.randint(10, 1)</span>. The function call <span class="literal">random.randint(1, 10)</span> will return a random integer between <span class="literal">1</span> and <span class="literal">10</span> because the first argument is the low end of the range and the second argument is the high end (while <span class="literal">random.randint(10, 1)</span> causes an error).</p>
<p class="indent">However, rather than through their position, <em>keyword arguments</em> are identified by the keyword put before them in the function call. Keyword arguments are often used for <em>optional parameters</em>. For example, the <span class="literal">print()</span> function has the optional parameters <span class="literal">end</span> and <span class="literal">sep</span> to specify what should be printed at the end of its arguments and between its arguments (separating them), respectively.</p>
<p class="indent">If you ran a program with the following code:</p>
<p class="programs"><span class="codestrong1">print('Hello')</span><br/>
<span class="codestrong1">print('World')</span></p>
<p class="noindent">the output would look like this:</p>
<p class="programs">Hello<br/>
World</p>
<p class="indent">The two outputted strings appear on separate lines because the <span class="literal">print()</span> function automatically adds a newline character to the end of the string it is passed. However, you can set the <span class="literal">end</span> keyword argument to change the newline character to a different string. For example, if the code were this:</p>
<p class="programs"><span class="codestrong1">print('Hello', end='')</span><br/>
<span class="codestrong1">print('World')</span></p>
<p class="noindent">the output would look like this:</p>
<p class="programs">HelloWorld</p>
<p class="indent">The output is printed on a single line because there is no longer a newline printed after <span class="literal">'Hello'</span>. Instead, the blank string is printed. This is useful if you need to disable the newline that gets added to the end of every <span class="literal">print()</span> function call.</p>
<p class="indent"><span epub:type="pagebreak" id="page_63"/>Similarly, when you pass multiple string values to <span class="literal">print()</span>, the function will automatically separate them with a single space. Enter the following into the interactive shell:</p>
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">print('cats', 'dogs', 'mice')</span><br/>
cats dogs mice</p>
<p class="indent">But you could replace the default separating string by passing the <span class="literal">sep</span> keyword argument a different string. Enter the following into the interactive shell:</p>
<p class="programs">&gt;&gt;&gt; <span class="codestrong1">print('cats', 'dogs', 'mice', sep=',')</span><br/>
cats,dogs,mice</p>
<p class="indent">You can add keyword arguments to the functions you write as well, but first you&#8217;ll have to learn about the list and dictionary data types in the next two chapters. For now, just know that some functions have optional keyword arguments that can be specified when the function is called.</p>
<h3 class="h3" id="ch03lev1sec5"><strong>The Call Stack</strong></h3>
<p class="noindent">Imagine that you have a meandering conversation with someone. You talk about your friend Alice, which then reminds you of a story about your coworker Bob, but first you have to explain something about your cousin Carol. You finish you story about Carol and go back to talking about Bob, and when you finish your story about Bob, you go back to talking about Alice. But then you are reminded about your brother David, so you tell a story about him, and then get back to finishing your original story about Alice. Your conversation followed a <em>stack</em>-like structure, like in <a href="ch03.xhtml#ch03fig01">Figure 3-1</a>. The conversation is stack-like because the current topic is always at the top of the stack.</p>
<div class="image"><a id="ch03fig01"/><img src="../images/03fig01.jpg" alt="image"/></div>
<p class="figcap"><em>Figure 3-1: Your meandering conversation stack</em></p>
<p class="indent">Similar to our meandering conversation, calling a function doesn&#8217;t send the execution on a one-way trip to the top of a function. Python will remember which line of code called the function so that the execution can return there when it encounters a <span class="literal">return</span> statement. If that original function called other functions, the execution would return to <em>those</em> function calls first, before returning from the original function call.</p>
<p class="indent"><span epub:type="pagebreak" id="page_64"/>Open a file editor window and enter the following code, saving it as <em>abcdCallStack.py</em>:</p>
<p class="programs">&#160;&#160;&#160;def a():<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;print('a() starts')<br/>
&#160;&#160;&#160;&#160;<span class="ent">&#x278A;</span> b()<br/>
&#160;&#160;&#160;&#160;<span class="ent">&#x278B;</span> d()<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;print('a() returns')<br/><br/>
&#160;&#160;&#160;def b():<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;print('b() starts')<br/>
&#160;&#160;&#160;&#160;<span class="ent">&#x278C;</span> c()<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;print('b() returns')<br/><br/>
&#160;&#160;&#160;def c():<br/>
&#160;&#160;&#160;&#160;<span class="ent">&#x278D;</span> print('c() starts')<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;print('c() returns')<br/><br/>
&#160;&#160;&#160;def d():<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;print('d() starts')<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;print('d() returns')<br/><br/>
<span class="ent">&#x278E;</span> a()</p>
<p class="indent">If you run this program, the output will look like this:</p>
<p class="programs">a() starts<br/>
b() starts<br/>
c() starts<br/>
c() returns<br/>
b() returns<br/>
d() starts<br/>
d() returns<br/>
a() returns</p>
<p class="indent">You can view the execution of this program at <em><a href="https://autbor.com/abcdcallstack/">https://autbor.com/abcdcallstack/</a></em>. When <span class="literal">a()</span> is called <span class="ent">&#x278E;</span>, it calls <span class="literal">b()</span> <span class="ent">&#x278A;</span>, which in turn calls <span class="literal">c()</span> <span class="ent">&#x278C;</span>. The <span class="literal">c()</span> function doesn&#8217;t call anything; it just displays <span class="literal">c() starts</span> <span class="ent">&#x278D;</span> and <span class="literal">c() returns</span> before returning to the line in <span class="literal">b()</span> that called it <span class="ent">&#x278C;</span>. Once execution returns to the code in <span class="literal">b()</span> that called <span class="literal">c()</span>, it returns to the line in <span class="literal">a()</span> that called <span class="literal">b()</span> <span class="ent">&#x278A;</span>. The execution continues to the next line in the <span class="literal">b()</span> function <span class="ent">&#x278B;</span>, which is a call to <span class="literal">d()</span>. Like the <span class="literal">c()</span> function, the <span class="literal">d()</span> function also doesn&#8217;t call anything. It just displays <span class="literal">d() starts</span> and <span class="literal">d() returns</span> before returning to the line in <span class="literal">b()</span> that called it. Since <span class="literal">b()</span> contains no other code, the execution returns to the line in <span class="literal">a()</span> that called <span class="literal">b()</span> <span class="ent">&#x278B;</span>. The last line in <span class="literal">a()</span> displays <span class="literal">a() returns</span> before returning to the original <span class="literal">a()</span> call at the end of the program <span class="ent">&#x278E;</span>.</p>
<p class="indent">The <em>call stack</em> is how Python remembers where to return the execution after each function call. The call stack isn&#8217;t stored in a variable in your program; rather, Python handles it behind the scenes. When your program calls a function, Python creates a <em>frame object</em> on the top of the call stack. Frame <span epub:type="pagebreak" id="page_65"/>objects store the line number of the original function call so that Python can remember where to return. If another function call is made, Python puts another frame object on the call stack above the other one.</p>
<p class="indent">When a function call returns, Python removes a frame object from the top of the stack and moves the execution to the line number stored in it. Note that frame objects are always added and removed from the top of the stack and not from any other place. <a href="ch03.xhtml#ch03fig02">Figure 3-2</a> illustrates the state of the call stack in <em>abcdCallStack.py</em> as each function is called and returns.</p>
<div class="image"><a id="ch03fig02"/><img src="../images/03fig02.jpg" alt="image"/></div>
<p class="figcap"><em>Figure 3-2: The frame objects of the call stack as</em> abcdCallStack.py <em>calls and returns from functions</em></p>
<p class="indent">The top of the call stack is which function the execution is currently in. When the call stack is empty, the execution is on a line outside of all functions.</p>
<p class="indent">The call stack is a technical detail that you don&#8217;t strictly need to know about to write programs. It&#8217;s enough to understand that function calls return to the line number they were called from. However, understanding call stacks makes it easier to understand local and global scopes, described in the next section.</p>
<h3 class="h3" id="ch03lev1sec6"><strong>Local and Global Scope</strong></h3>
<p class="noindent">Parameters and variables that are assigned in a called function are said to exist in that function&#8217;s <em>local scope</em>. Variables that are assigned outside all functions are said to exist in the <em>global scope</em>. A variable that exists in a local scope is called a <em>local variable</em>, while a variable that exists in the global scope is called a <em>global variable</em>. A variable must be one or the other; it cannot be both local and global.</p>
<p class="indent">Think of a <em>scope</em> as a container for variables. When a scope is destroyed, all the values stored in the scope&#8217;s variables are forgotten. There is only one global scope, and it is created when your program begins. When your program terminates, the global scope is destroyed, and all its variables are forgotten. Otherwise, the next time you ran a program, the variables would remember their values from the last time you ran it.</p>
<p class="indent">A local scope is created whenever a function is called. Any variables assigned in the function exist within the function&#8217;s local scope. When the function returns, the local scope is destroyed, and these variables are forgotten. The next time you call the function, the local variables will not remember the values stored in them from the last time the function was called. Local variables are also stored in frame objects on the call stack.</p>
<p class="indent"><span epub:type="pagebreak" id="page_66"/>Scopes matter for several reasons:</p>
<ul>
<li class="noindent">Code in the global scope, outside of all functions, cannot use any local variables.</li>
<li class="noindent">However, code in a local scope can access global variables.</li>
<li class="noindent">Code in a function&#8217;s local scope cannot use variables in any other local scope.</li>
<li class="noindent">You can use the same name for different variables if they are in different scopes. That is, there can be a local variable named <span class="literal">spam</span> and a global variable also named <span class="literal">spam</span>.</li>
</ul>
<p class="indent">The reason Python has different scopes instead of just making everything a global variable is so that when variables are modified by the code in a particular call to a function, the function interacts with the rest of the program only through its parameters and the return value. This narrows down the number of lines of code that may be causing a bug. If your program contained nothing but global variables and had a bug because of a variable being set to a bad value, then it would be hard to track down where this bad value was set. It could have been set from anywhere in the program, and your program could be hundreds or thousands of lines long! But if the bug is caused by a local variable with a bad value, you know that only the code in that one function could have set it incorrectly.</p>
<p class="indent">While using global variables in small programs is fine, it is a bad habit to rely on global variables as your programs get larger and larger.</p>
<h4 class="h4" id="ch03lev2sec2"><strong><em>Local Variables Cannot Be Used in the Global Scope</em></strong></h4>
<p class="noindent">Consider this program, which will cause an error when you run it:</p>
<p class="programs">def spam():<br/>
<span class="ent">&#x278A;</span> eggs = 31337<br/>
spam()<br/>
print(eggs)</p>
<p class="indent">If you run this program, the output will look like this:</p>
<p class="programs">Traceback (most recent call last):<br/>
&#160;&#160;File "C:/test1.py", line 4, in &lt;module&gt;<br/>
&#160;&#160;&#160;&#160;print(eggs)<br/>
NameError: name 'eggs' is not defined</p>
<p class="indent">The error happens because the <span class="literal">eggs</span> variable exists only in the local scope created when <span class="literal">spam()</span> is called <span class="ent">&#x278A;</span>. Once the program execution returns from <span class="literal">spam</span>, that local scope is destroyed, and there is no longer a variable named <span class="literal">eggs</span>. So when your program tries to run <span class="literal">print(eggs)</span>, Python gives you an error saying that <span class="literal">eggs</span> is not defined. This makes sense if you think about it; when the program execution is in the global scope, no local scopes exist, so there can&#8217;t be any local variables. This is why only global variables can be used in the global scope.</p>
<h4 class="h4" id="ch03lev2sec3"><span epub:type="pagebreak" id="page_67"/><strong><em>Local Scopes Cannot Use Variables in Other Local Scopes</em></strong></h4>
<p class="noindent">A new local scope is created whenever a function is called, including when a function is called from another function. Consider this program:</p>
<p class="programs">&#160;&#160;def spam():<br/>
&#160;&#160;&#160;&#160;<span class="ent">&#x278A;</span> eggs = 99<br/>
&#160;&#160;&#160;&#160;<span class="ent">&#x278B;</span> bacon()<br/>
&#160;&#160;&#160;&#160;<span class="ent">&#x278C;</span> print(eggs)<br/>
<br/>
&#160;&#160;&#160;def bacon():<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;ham = 101<br/>
&#160;&#160;&#160;&#160;<span class="ent">&#x278D;</span> eggs = 0<br/><br/>
<span class="ent">&#x278E;</span> spam()</p>
<p class="indent">You can view the execution of this program at <em><a href="https://autbor.com/otherlocalscopes/">https://autbor.com/otherlocalscopes/</a></em>. When the program starts, the <span class="literal">spam()</span> function is called <span class="ent">&#x278E;</span>, and a local scope is created. The local variable <span class="literal">eggs</span> <span class="ent">&#x278A;</span> is set to <span class="literal">99</span>. Then the <span class="literal">bacon()</span> function is called <span class="ent">&#x278B;</span>, and a second local scope is created. Multiple local scopes can exist at the same time. In this new local scope, the local variable <span class="literal">ham</span> is set to <span class="literal">101</span>, and a local variable <span class="literal">eggs</span>&#8212;which is different from the one in <span class="literal">spam()</span>&#8217;s local scope&#8212;is also created <span class="ent">&#x278D;</span> and set to <span class="literal">0</span>.</p>
<p class="indent">When <span class="literal">bacon()</span> returns, the local scope for that call is destroyed, including its <span class="literal">eggs</span> variable. The program execution continues in the <span class="literal">spam()</span> function to print the value of <span class="literal">eggs</span> <span class="ent">&#x278C;</span>. Since the local scope for the call to <span class="literal">spam()</span> still exists, the only <span class="literal">eggs</span> variable is the <span class="literal">spam()</span> function&#8217;s <span class="literal">eggs</span> variable, which was set to <span class="literal">99</span>. This is what the program prints.</p>
<p class="indent">The upshot is that local variables in one function are completely separate from the local variables in another function.</p>
<h4 class="h4" id="ch03lev2sec4"><strong><em>Global Variables Can Be Read from a Local Scope</em></strong></h4>
<p class="noindent">Consider the following program:</p>
<p class="programs">def spam():<br/>
&#160;&#160;&#160;&#160;print(eggs)<br/>
eggs = 42<br/>
spam()<br/>
print(eggs)</p>
<p class="indent">You can view the execution of this program at <em><a href="https://autbor.com/readglobal/">https://autbor.com/readglobal/</a></em>. Since there is no parameter named <span class="literal">eggs</span> or any code that assigns <span class="literal">eggs</span> a value in the <span class="literal">spam()</span> function, when <span class="literal">eggs</span> is used in <span class="literal">spam()</span>, Python considers it a reference to the global variable <span class="literal">eggs</span>. This is why <span class="literal">42</span> is printed when the previous program is run.</p>
<h4 class="h4" id="ch03lev2sec5"><span epub:type="pagebreak" id="page_68"/><strong><em>Local and Global Variables with the Same Name</em></strong></h4>
<p class="noindent">Technically, it&#8217;s perfectly acceptable to use the same variable name for a global variable and local variables in different scopes in Python. But, to simplify your life, avoid doing this. To see what happens, enter the following code into the file editor and save it as <em>localGlobalSameName.py</em>:</p>
<p class="programs">&#160;&#160;&#160;def spam():<br/>
&#160;&#160;&#160;&#160;<span class="ent">&#x278A;</span> eggs = 'spam local'<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;print(eggs)&#160;&#160;&#160;&#160;# prints 'spam local'<br/><br/>
&#160;&#160;&#160;def bacon():<br/>
&#160;&#160;&#160;&#160;<span class="ent">&#x278B;</span> eggs = 'bacon local'<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;print(eggs)&#160;&#160;&#160;&#160;# prints 'bacon local'<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;spam()<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;print(eggs)&#160;&#160;&#160;&#160;# prints 'bacon local'<br/><br/>
<span class="ent">&#x278C;</span> eggs = 'global'<br/>
&#160;&#160;&#160;bacon()<br/>
&#160;&#160;&#160;print(eggs)&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;# prints 'global'</p>
<p class="indent">When you run this program, it outputs the following:</p>
<p class="programs">bacon local<br/>
spam local<br/>
bacon local<br/>
global</p>
<p class="indentb">You can view the execution of this program at <em><a href="https://autbor.com/localglobalsamename/">https://autbor.com/localglobalsamename/</a></em>. There are actually three different variables in this program, but confusingly they are all named <span class="literal">eggs</span>. The variables are as follows:</p>
<p class="noindent"><span class="ent">&#x278A;</span>&#9;A variable named <span class="literal">eggs</span> that exists in a local scope when <span class="literal">spam()</span> is called.</p>
<p class="noindent"><span class="ent">&#x278B;</span>&#9;A variable named <span class="literal">eggs</span> that exists in a local scope when <span class="literal">bacon()</span> is called.</p>
<p class="noindent"><span class="ent">&#x278C;</span>&#9;A variable named <span class="literal">eggs</span> that exists in the global scope.</p>
<p class="indentt">Since these three separate variables all have the same name, it can be confusing to keep track of which one is being used at any given time. This is why you should avoid using the same variable name in different scopes.</p>
<h3 class="h3" id="ch03lev1sec7"><strong>The global Statement</strong></h3>
<p class="noindent">If you need to modify a global variable from within a function, use the <span class="literal">global</span> statement. If you have a line such as <span class="literal">global eggs</span> at the top of a function, it tells Python, &#8220;In this function, <span class="literal">eggs</span> refers to the global variable, so don&#8217;t create a local variable with this name.&#8221; For example, enter the following code into the file editor and save it as <em>globalStatement.py</em>:</p>
<p class="programs">def spam():<br/>
&#160;&#160;<span class="ent">&#x278A;</span> global eggs<br/>
&#160;&#160;<span class="ent">&#x278B;</span> eggs = 'spam'<br/>
<span epub:type="pagebreak" id="page_69"/><br/>
eggs = 'global'<br/>
spam()<br/>
print(eggs)</p>
<p class="indent">When you run this program, the final <span class="literal">print()</span> call will output this:</p>
<p class="programs">spam</p>
<p class="indent">You can view the execution of this program at <em><a href="https://autbor.com/globalstatement/">https://autbor.com/globalstatement/</a></em>. Because <span class="literal">eggs</span> is declared <span class="literal">global</span> at the top of <span class="literal">spam()</span> <span class="ent">&#x278A;</span>, when <span class="literal">eggs</span> is set to <span class="literal">'spam'</span> <span class="ent">&#x278B;</span>, this assignment is done to the globally scoped <span class="literal">eggs</span>. No local <span class="literal">eggs</span> variable is created.</p>
<p class="indent">There are four rules to tell whether a variable is in a local scope or global scope:</p>
<ul>
<li class="noindent">If a variable is being used in the global scope (that is, outside of all functions), then it is always a global variable.</li>
<li class="noindent">If there is a <span class="literal">global</span> statement for that variable in a function, it is a global variable.</li>
<li class="noindent">Otherwise, if the variable is used in an assignment statement in the function, it is a local variable.</li>
<li class="noindent">But if the variable is not used in an assignment statement, it is a global variable.</li>
</ul>
<p class="indent">To get a better feel for these rules, here&#8217;s an example program. Enter the following code into the file editor and save it as <em>sameNameLocalGlobal.py</em>:</p>
<p class="programs">def spam():<br/>
&#160;&#160;<span class="ent">&#x278A;</span> global eggs<br/>
&#160;&#160;&#160;&#160;&#160;eggs = 'spam' # this is the global<br/><br/>
def bacon():<br/>
&#160;&#160;<span class="ent">&#x278B;</span> eggs = 'bacon' # this is a local<br/><br/>
def ham():<br/>
&#160;&#160;<span class="ent">&#x278C;</span> print(eggs) # this is the global<br/><br/>
eggs = 42 # this is the global<br/>
spam()<br/>
print(eggs)</p>
<p class="indent">In the <span class="literal">spam()</span> function, <span class="literal">eggs</span> is the global <span class="literal">eggs</span> variable because there&#8217;s a <span class="literal">global</span> statement for <span class="literal">eggs</span> at the beginning of the function <span class="ent">&#x278A;</span>. In <span class="literal">bacon()</span>, <span class="literal">eggs</span> is a local variable because there&#8217;s an assignment statement for it in that function <span class="ent">&#x278B;</span>. In <span class="literal">ham()</span> <span class="ent">&#x278C;</span>, <span class="literal">eggs</span> is the global variable because there is no assignment statement or <span class="literal">global</span> statement for it in that function. If you run <em>sameNameLocalGlobal.py</em>, the output will look like this:</p>
<p class="programs">spam</p>
<p class="indent"><span epub:type="pagebreak" id="page_70"/>You can view the execution of this program at <em><a href="https://autbor.com/sameNameLocalGlobal/">https://autbor.com/sameNameLocalGlobal/</a></em>. In a function, a variable will either always be global or always be local. The code in a function can&#8217;t use a local variable named <span class="literal">eggs</span> and then use the global <span class="literal">eggs</span> variable later in that same function.</p>
<div class="note">
<p class="notet"><strong><span class="notes">NOTE</span></strong></p>
<p class="notep"><em>If you ever want to modify the value stored in a global variable from in a function, you must use a <span class="codeitalic">global</span> statement on that variable.</em></p>
</div>
<p class="indent">If you try to use a local variable in a function before you assign a value to it, as in the following program, Python will give you an error. To see this, enter the following into the file editor and save it as <em>sameNameError.py</em>:</p>
<p class="programs">&#160;&#160;&#160;def spam():<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;print(eggs) # ERROR!<br/>
&#160;&#160;&#160;&#160;<span class="ent">&#x278A;</span> eggs = 'spam local'<br/>
<br/>
<span class="ent">&#x278B;</span> eggs = 'global'<br/>
&#160;&#160;&#160;spam()</p>
<p class="indent">If you run the previous program, it produces an error message.</p>
<p class="programs">Traceback (most recent call last):<br/>
&#160;&#160;File "C:/sameNameError.py", line 6, in &lt;module&gt;<br/>
&#160;&#160;&#160;&#160;spam()<br/>
&#160;&#160;File "C:/sameNameError.py", line 2, in spam<br/>
&#160;&#160;&#160;&#160;print(eggs) # ERROR!<br/>
UnboundLocalError: local variable 'eggs' referenced before assignment</p>
<p class="indent">You can view the execution of this program at <em><a href="https://autbor.com/sameNameError/">https://autbor.com/sameNameError/</a></em>. This error happens because Python sees that there is an assignment statement for <span class="literal">eggs</span> in the <span class="literal">spam()</span> function <span class="ent">&#x278A;</span> and, therefore, considers <span class="literal">eggs</span> to be local. But because <span class="literal">print(eggs)</span> is executed before <span class="literal">eggs</span> is assigned anything, the local variable <span class="literal">eggs</span> doesn&#8217;t exist. Python will <em>not</em> fall back to using the global <span class="literal">eggs</span> variable <span class="ent">&#x278B;</span>.</p>
<div class="sidebar">
<p class="sidebart"><strong>FUNCTIONS AS &#8220;BLACK BOXES&#8221;</strong></p>
<p class="spara">Often, all you need to know about a function are its inputs (the parameters) and output value; you don&#8217;t always have to burden yourself with how the function&#8217;s code actually works. When you think about functions in this high-level way, it&#8217;s common to say that you&#8217;re treating a function as a &#8220;black box.&#8221;</p>
<p class="sparai">This idea is fundamental to modern programming. Later chapters in this book will show you several modules with functions that were written by other people. While you can take a peek at the source code if you&#8217;re curious, you don&#8217;t need to know how these functions work in order to use them. And because writing functions without global variables is encouraged, you usually don&#8217;t have to worry about the function&#8217;s code interacting with the rest of your program.</p>
</div>
<h3 class="h3" id="ch03lev1sec8"><span epub:type="pagebreak" id="page_71"/><strong>Exception Handling</strong></h3>
<p class="noindent">Right now, getting an error, or <em>exception</em>, in your Python program means the entire program will crash. You don&#8217;t want this to happen in real-world programs. Instead, you want the program to detect errors, handle them, and then continue to run.</p>
<p class="indent">For example, consider the following program, which has a divide-by-zero error. Open a file editor window and enter the following code, saving it as <em>zeroDivide.py</em>:</p>
<p class="programs">def spam(divideBy):<br/>
&#160;&#160;&#160;&#160;return 42 / divideBy<br/><br/>
print(spam(2))<br/>
print(spam(12))<br/>
print(spam(0))<br/>
print(spam(1))</p>
<p class="indent">We&#8217;ve defined a function called <span class="literal">spam</span>, given it a parameter, and then printed the value of that function with various parameters to see what happens. This is the output you get when you run the previous code:</p>
<p class="programs">21.0<br/>
3.5<br/>
Traceback (most recent call last):<br/>
&#160;&#160;File "C:/zeroDivide.py", line 6, in &lt;module&gt;<br/>
&#160;&#160;&#160;&#160;print(spam(0))<br/>
&#160;&#160;File "C:/zeroDivide.py", line 2, in spam<br/>
&#160;&#160;&#160;&#160;return 42 / divideBy<br/>
ZeroDivisionError: division by zero</p>
<p class="indent">You can view the execution of this program at <em><a href="https://autbor.com/zerodivide/">https://autbor.com/zerodivide/</a></em>. A <span class="literal">ZeroDivisionError</span> happens whenever you try to divide a number by zero. From the line number given in the error message, you know that the <span class="literal">return</span> statement in <span class="literal">spam()</span> is causing an error.</p>
<p class="indent">Errors can be handled with <span class="literal">try</span> and <span class="literal">except</span> statements. The code that could potentially have an error is put in a <span class="literal">try</span> clause. The program execution moves to the start of a following <span class="literal">except</span> clause if an error happens.</p>
<p class="indent">You can put the previous divide-by-zero code in a <span class="literal">try</span> clause and have an <span class="literal">except</span> clause contain code to handle what happens when this error occurs.</p>
<p class="programs">def spam(divideBy):<br/>
&#160;&#160;&#160;&#160;try:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return 42 / divideBy<br/>
&#160;&#160;&#160;&#160;except ZeroDivisionError:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;print('Error: Invalid argument.')<br/><br/>
print(spam(2))<br/>
print(spam(12))<br/>
print(spam(0))<br/>
print(spam(1))</p>
<p class="indent"><span epub:type="pagebreak" id="page_72"/>When code in a <span class="literal">try</span> clause causes an error, the program execution immediately moves to the code in the <span class="literal">except</span> clause. After running that code, the execution continues as normal. The output of the previous program is as follows:</p>
<p class="programs">21.0<br/>
3.5<br/>
Error: Invalid argument.<br/>
None<br/>
42.0</p>
<p class="indent">You can view the execution of this program at <em><a href="https://autbor.com/tryexceptzerodivide/">https://autbor.com/tryexceptzerodivide/</a></em>. Note that any errors that occur in function calls in a <span class="literal">try</span> block will also be caught. Consider the following program, which instead has the <span class="literal">spam()</span> calls in the <span class="literal">try</span> block:</p>
<p class="programs">def spam(divideBy):<br/>
&#160;&#160;&#160;&#160;return 42 / divideBy<br/><br/>
try:<br/>
&#160;&#160;&#160;&#160;print(spam(2))<br/>
&#160;&#160;&#160;&#160;print(spam(12))<br/>
&#160;&#160;&#160;&#160;print(spam(0))<br/>
&#160;&#160;&#160;&#160;print(spam(1))<br/>
except ZeroDivisionError:<br/>
&#160;&#160;&#160;&#160;print('Error: Invalid argument.')</p>
<p class="indent">When this program is run, the output looks like this:</p>
<p class="programs">21.0<br/>
3.5<br/>
Error: Invalid argument.</p>
<p class="indent">You can view the execution of this program at <em><a href="https://autbor.com/spamintry/">https://autbor.com/spamintry/</a></em>. The reason <span class="literal">print(spam(1))</span> is never executed is because once the execution jumps to the code in the <span class="literal">except</span> clause, it does not return to the <span class="literal">try</span> clause. Instead, it just continues moving down the program as normal.</p>
<h3 class="h3" id="ch03lev1sec9"><strong>A Short Program: Zigzag</strong></h3>
<p class="noindent">Let&#8217;s use the programming concepts you&#8217;ve learned so far to create a small animation program. This program will create a back-and-forth, zigzag pattern until the user stops it by pressing the Mu editor&#8217;s Stop button or by pressing <small>CTRL-C</small>. When you run this program, the output will look something like this:</p>
<p class="programs">&#160;&#160;&#160;&#160;********<br/>
&#160;&#160;&#160;********<br/>
&#160;&#160;********<br/>
<span epub:type="pagebreak" id="page_73"/>&#160;********<br/>
********<br/>
&#160;********<br/>
&#160;&#160;********<br/>
&#160;&#160;&#160;********<br/>
&#160;&#160;&#160;&#160;********</p>
<p class="indent">Type the following source code into the file editor, and save the file as <em>zigzag.py</em>:</p>
<p class="programs">import time, sys<br/>
indent = 0 # How many spaces to indent.<br/>
indentIncreasing = True # Whether the indentation is increasing or not.<br/><br/>
try:<br/>
&#160;&#160;&#160;&#160;while True: # The main program loop.<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;print(' ' * indent, end='')<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;print('********')<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;time.sleep(0.1) # Pause for 1/10 of a second.<br/><br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if indentIncreasing:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;# Increase the number of spaces:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;indent = indent + 1<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if indent == 20:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;# Change direction:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;indentIncreasing = False<br/><br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;# Decrease the number of spaces:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;indent = indent - 1<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if indent == 0:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;# Change direction:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;indentIncreasing = True<br/>
except KeyboardInterrupt:<br/>
&#160;&#160;&#160;&#160;sys.exit()</p>
<p class="indent">Let&#8217;s look at this code line by line, starting at the top.</p>
<p class="programs">import time, sys<br/>
indent = 0 # How many spaces to indent.<br/>
indentIncreasing = True # Whether the indentation is increasing or not.</p>
<p class="indent">First, we&#8217;ll import the <span class="literal">time</span> and <span class="literal">sys</span> modules. Our program uses two variables: the <span class="literal">indent</span> variable keeps track of how many spaces of indentation are before the band of eight asterisks and <span class="literal">indentIncreasing</span> contains a Boolean value to determine if the amount of indentation is increasing or decreasing.</p>
<p class="programs">try:<br/>
&#160;&#160;&#160;&#160;while True: # The main program loop.<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;print(' ' * indent, end='')<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;print('********')<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;time.sleep(0.1) # Pause for 1/10 of a second.</p>
<p class="indent"><span epub:type="pagebreak" id="page_74"/>Next, we place the rest of the program inside a try statement. When the user presses <small>CTRL-C</small> while a Python program is running, Python raises the <span class="literal">KeyboardInterrupt</span> exception. If there is no <span class="literal">try</span>-<span class="literal">except</span> statement to catch this exception, the program crashes with an ugly error message. However, for our program, we want it to cleanly handle the <span class="literal">KeyboardInterrupt</span> exception by calling <span class="literal">sys.exit()</span>. (The code for this is in the <span class="literal">except</span> statement at the end of the program.)</p>
<p class="indent">The <span class="literal">while True:</span> infinite loop will repeat the instructions in our program forever. This involves using <span class="literal">' ' * indent</span> to print the correct amount of spaces of indentation. We don&#8217;t want to automatically print a newline after these spaces, so we also pass <span class="literal">end=''</span> to the first <span class="literal">print()</span> call. A second <span class="literal">print()</span> call prints the band of asterisks. The <span class="literal">time.sleep()</span> function hasn&#8217;t been covered yet, but suffice it to say that it introduces a one-tenth-second pause in our program at this point.</p>
<p class="programs">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if indentIncreasing:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;# Increase the number of spaces:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;indent = indent + 1<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if indent == 20:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;indentIncreasing = False # Change direction.</p>
<p class="indent">Next, we want to adjust the amount of indentation for the next time we print asterisks. If <span class="literal">indentIncreasing</span> is <span class="literal">True</span>, then we want to add one to <span class="literal">indent</span>. But once indent reaches <span class="literal">20</span>, we want the indentation to decrease.</p>
<p class="programs">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;# Decrease the number of spaces:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;indent = indent - 1<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if indent == 0:<br/>
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;indentIncreasing = True # Change direction.</p>
<p class="indent">Meanwhile, if <span class="literal">indentIncreasing</span> was <span class="literal">False</span>, we want to subtract one from <span class="literal">indent</span>. Once indent reaches <span class="literal">0</span>, we want the indentation to increase once again. Either way, the program execution will jump back to the start of the main program loop to print the asterisks again.</p>
<p class="programs">except KeyboardInterrupt:<br/>
&#160;&#160;&#160;&#160;sys.exit()</p>
<p class="indent">If the user presses <small>CTRL-C</small> at any point that the program execution is in the <span class="literal">try</span> block, the <span class="literal">KeyboardInterrrupt</span> exception is raised and handled by this <span class="literal">except</span> statement. The program execution moves inside the <span class="literal">except</span> block, which runs <span class="literal">sys.exit()</span> and quits the program. This way, even though the main program loop is an infinite loop, the user has a way to shut down the program.</p>
<h3 class="h3" id="ch03lev1sec10"><span epub:type="pagebreak" id="page_75"/><strong>Summary</strong></h3>
<p class="noindent">Functions are the primary way to compartmentalize your code into logical groups. Since the variables in functions exist in their own local scopes, the code in one function cannot directly affect the values of variables in other functions. This limits what code could be changing the values of your variables, which can be helpful when it comes to debugging your code.</p>
<p class="indent">Functions are a great tool to help you organize your code. You can think of them as black boxes: they have inputs in the form of parameters and outputs in the form of return values, and the code in them doesn&#8217;t affect variables in other functions.</p>
<p class="indent">In previous chapters, a single error could cause your programs to crash. In this chapter, you learned about <span class="literal">try</span> and <span class="literal">except</span> statements, which can run code when an error has been detected. This can make your programs more resilient to common error cases.</p>
<h3 class="h3" id="ch03lev1sec11"><strong>Practice Questions</strong></h3>
<p class="question"><a id="ch03que1" href="app03.xhtml#ch03ans1">1</a>. Why are functions advantageous to have in your programs?</p>
<p class="question"><a id="ch03que2" href="app03.xhtml#ch03ans2">2</a>. When does the code in a function execute: when the function is defined or when the function is called?</p>
<p class="question"><a id="ch03que3" href="app03.xhtml#ch03ans3">3</a>. What statement creates a function?</p>
<p class="question"><a id="ch03que4" href="app03.xhtml#ch03ans4">4</a>. What is the difference between a function and a function call?</p>
<p class="question"><a id="ch03que5" href="app03.xhtml#ch03ans5">5</a>. How many global scopes are there in a Python program? How many local scopes?</p>
<p class="question"><a id="ch03que6" href="app03.xhtml#ch03ans6">6</a>. What happens to variables in a local scope when the function call returns?</p>
<p class="question"><a id="ch03que7" href="app03.xhtml#ch03ans7">7</a>. What is a return value? Can a return value be part of an expression?</p>
<p class="question"><a id="ch03que8" href="app03.xhtml#ch03ans8">8</a>. If a function does not have a return statement, what is the return value of a call to that function?</p>
<p class="question"><a id="ch03que9" href="app03.xhtml#ch03ans9">9</a>. How can you force a variable in a function to refer to the global variable?</p>
<p class="question1"><a id="ch03que10" href="app03.xhtml#ch03ans10">10</a>. What is the data type of <span class="literal">None</span>?</p>
<p class="question1"><a id="ch03que11" href="app03.xhtml#ch03ans11">11</a>. What does the <span class="literal">import areallyourpetsnamederic</span> statement do?</p>
<p class="question1"><a id="ch03que12" href="app03.xhtml#ch03ans12">12</a>. If you had a function named <span class="literal">bacon()</span> in a module named <span class="literal">spam</span>, how would you call it after importing <span class="literal">spam</span>?</p>
<p class="question1"><a id="ch03que13" href="app03.xhtml#ch03ans13">13</a>. How can you prevent a program from crashing when it gets an error?</p>
<p class="question1"><a id="ch03que14" href="app03.xhtml#ch03ans14">14</a>. What goes in the <span class="literal">try</span> clause? What goes in the <span class="literal">except</span> clause?</p>
<h3 class="h3" id="ch03lev1sec12"><span epub:type="pagebreak" id="page_76"/><strong>Practice Projects</strong></h3>
<p class="noindent">For practice, write programs to do the following tasks.</p>
<h4 class="h4" id="ch03lev2sec6"><strong><em>The Collatz Sequence</em></strong></h4>
<p class="noindent">Write a function named <span class="literal">collatz()</span> that has one parameter named <span class="literal">number</span>. If <span class="literal">number</span> is even, then <span class="literal">collatz()</span> should print <span class="literal">number // 2</span> and return this value. If <span class="literal">number</span> is odd, then <span class="literal">collatz()</span> should print and return <span class="literal">3 * number + 1</span>.</p>
<p class="indent">Then write a program that lets the user type in an integer and that keeps calling <span class="literal">collatz()</span> on that number until the function returns the value <span class="literal">1</span>. (Amazingly enough, this sequence actually works for any integer&#8212;sooner or later, using this sequence, you&#8217;ll arrive at 1! Even mathematicians aren&#8217;t sure why. Your program is exploring what&#8217;s called the <em>Collatz sequence</em>, sometimes called &#8220;the simplest impossible math problem.&#8221;)</p>
<p class="indent">Remember to convert the return value from <span class="literal">input()</span> to an integer with the <span class="literal">int()</span> function; otherwise, it will be a string value.</p>
<p class="indent">Hint: An integer <span class="literal">number</span> is even if <span class="literal">number % 2 == 0</span>, and it&#8217;s odd if <span class="literal">number % 2 == 1</span>.</p>
<p class="indent">The output of this program could look something like this:</p>
<p class="programs">Enter number:<br/>
3<br/>
10<br/>
5<br/>
16<br/>
8<br/>
4<br/>
2<br/>
1</p>
<h4 class="h4" id="ch03lev2sec7"><strong><em>Input Validation</em></strong></h4>
<p class="noindent">Add <span class="literal">try</span> and <span class="literal">except</span> statements to the previous project to detect whether the user types in a noninteger string. Normally, the <span class="literal">int()</span> function will raise a <span class="literal">ValueError</span> error if it is passed a noninteger string, as in <span class="literal">int('puppy')</span>. In the <span class="literal">except</span> clause, print a message to the user saying they must enter an integer.</p>
</body>
</html>
